<html>
<style>
rect {
	stroke: white;
	stroke-width: 0.1;
}
text {
	fill: white;
	font-size: 25%;
}
</style>
<script>
class Tile {
	constructor(p,x,y,w,h){
		this.ele = p.appendChild(document.createElementNS("http://www.w3.org/2000/svg", 'rect'));
		this.ele.setAttributeNS(null, 'x', x);
		this.ele.setAttributeNS(null, 'y', y);
		this.ele.setAttributeNS(null, 'width', w);
		this.ele.setAttributeNS(null, 'height', h);
	}
	recolor(nc){
		this.ele.style.fill = nc;
	}
	reset(){
		this.ele.style.fill = '';
	}
}
class TileWithNumber extends Tile{
	constructor(p,x,y,w,h){
		super(p,x,y,w,h);
		this.numberEle = p.appendChild(document.createElementNS("http://www.w3.org/2000/svg", 'text'));
		this.numberEle.appendChild(document.createTextNode('0'));
		this.numberEle.setAttribute('y', y+h/2);
		this.numberEle.setAttribute('x', x+w/2);
	}
	recolor(nc){
		if (this.numberEle.textContent==='9'){
			this.numberEle.textContent = '0';
			this.numberEle.style.fill = '';
			super.reset();
		} else {
			this.numberEle.textContent ++;
			this.numberEle.style.fill = nc.inv();
			super.recolor(nc);
		}
	}
}

class ColorRGB {
	constructor(r,g,b){
		this.r = r;
		this.g = g;
		this.b = b;
	}
	toString(){
		return `rgb(${this.r},${this.g},${this.b})`;
	}
	inv(){
		return `rgb(${255-this.r},${255-this.g},${255-this.b})`;
	}
}

function getRandomInt(min, max) {
  min = Math.ceil(min);
  max = Math.floor(max);
  return Math.floor(Math.random() * (max - min) + min); //The maximum is exclusive and the minimum is inclusive
}

function randomRGB(){
	const r = getRandomInt(0,255);
	const g = getRandomInt(0,255);
	const b = getRandomInt(0,255);
	return new ColorRGB(r,g,b);
}

class Colorboard {
	constructor(p,width, height){
		this.element = p;
		this.width = width;
		this.height = height;
		this.tiles = new Array(height);
		let t = new DocumentFragment();
		let xd = 100/width;
		let yd = 100/height;
		for (let r=0;r<height;++r){
			this.tiles[r] = new Array(width);
			for (let c=0;c<width;++c){
				this.tiles[r][c] = new TileWithNumber(t,c*xd,r*yd,xd,yd);
			}
		}
		p.appendChild(t);
	}

}
class RandomColorboard {
	constructor(cb){
		this.cb = cb;
		this.interval = null;
	}
	tick(){
		let r = getRandomInt(0,this.cb.height);
		let c = getRandomInt(0,this.cb.width);
		this.cb.tiles[r][c].recolor(randomRGB());
	}
	setInterval(v){
		if (this.interval){
			clearTimeout(this.interval);
			this.interval = null;
		}
		this.interval = setInterval(this.tick.bind(this), v);
	}
}
</script>
<svg id='nsvg' viewBox="0 0 100 100" height='calc(100% - 2em)' width='100%'>
</svg>
<center><input id='interval' type='number' /><button onclick='randomCb.setInterval(Math.max(250,interval.value))'>Set Interval</button></center>
<script>
let cb = new Colorboard(document.querySelector('#nsvg'),3,1);
let randomCb = new RandomColorboard(cb);
</script>
</html>