<html>
<style>
	#timeleft {
		margin: 0 auto;
		text-align: center;
	}
	#timeleft input {
		font-size: 4em;
	}
</style>
<div id='timeleft'>
<input id='hleft' size=3 />
<input id='mleft' size=3 />
<input id='sleft' size=2 />
</div>
<br />
<div id='settings' style='margin: 0 auto; text-align: center;'>
<input id='hrs' type=number size=5 value=0 min=0 max=99 /> HRS
<input id='min' type=number size=5 value=0 min=0 max=59 /> MINS
<input id='sec' type=number size=5 value=0 min=0 max=59 /> SECS
<button onclick='main();'>Start</button>
</div>
<script>
var endTime = undefined;
var timeEvent = undefined;
function main(){
	let hr = hrs.value;
	let mins = min.value;
	let secs = sec.value;
	console.log(hr,mins,secs);
	let start = new Date();
	let diff = hr*3600000 + mins*60000 + secs*1000;
	console.log(start);
	endTime = new Date(start.getTime() + diff);
	if (timeEvent){
		clearInterval(timeEvent);
	}
	timeEvent = setInterval(updateTime, 500);
	updateTime();
}
function updateTime(){
	console.log("CALL!");
	let nowTime = new Date();
	let diff = endTime - nowTime;
	if (diff <= 1000){
		clearInterval(timeEvent);
		timeEvent = undefined;
	}
	let hrs = 0;
	while (diff >= 3600000){
		diff -= 3600000;
		hrs++;
	}
	let mins = 0;
	while ( diff >=60000){
		diff -= 60000;
		mins++;
	}
	let secs = 0;
	while (diff>=1000){
		diff -= 1000;
		secs++;
	}
	hleft.value = hrs.toString();
	mleft.value = mins.toString();
	sleft.value = secs.toString();
}
</script>
</html>